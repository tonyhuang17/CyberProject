graph TB
    A[Page Load<br/>useEffect]
    B[Retrieve JWT<br/>from localStorage]
    C[GET /api/items<br/>+ Bearer token]
    D[API Route Handler]
    E[JWT Verification<br/>requireAuth middleware]
    F{Token Valid?}
    G[MongoDB Query<br/>Find ALL secrets]
    H[(Secrets Collection<br/>Returns EVERYTHING)]
    I[Response<br/>Array of secrets<br/>⚠️ ALL secretValues in PLAINTEXT]
    J[React State<br/>setItems array]
    K[Render Secrets<br/>masked by default]
    L[User clicks 'Reveal']
    M[Toggle revealedSecrets Set]
    N[Display PLAINTEXT<br/>secretValue]
    O[User clicks 'Copy']
    P[navigator.clipboard<br/>Copy plaintext secret]
    
    A --> B
    B --> C
    C --> D
    D --> E
    E --> F
    F -->|Yes| G
    F -->|No| Q[401 Unauthorized]
    G --> H
    H -->|All secrets returned| I
    I -->|Over HTTP| J
    J --> K
    K --> L
    L --> M
    M --> N
    K --> O
    O --> P
    
    style B fill:#ff6b6b,stroke:#c92a2a,stroke-width:3px
    style H fill:#ff6b6b,stroke:#c92a2a,stroke-width:3px
    style I fill:#ff6b6b,stroke:#c92a2a,stroke-width:3px
    style N fill:#ffd43b
    style P fill:#ffd43b
    style Q fill:#ffd43b
    
    R[❌ CRITICAL ISSUES]
    R -.->|No filtering/RBAC| G
    R -.->|Returns ALL secrets| H
    R -.->|HTTP transmission| I
    R -.->|Client-side masking only| K
    R -.->|Clipboard exposure| P